\label{sub:ucudcm}
In this section we consider a variant of the problem, 
when there are no capacity constraints and the graph is undirected.

Let $G = (V, E)$ be a graph, 
and let $T = (V, E')$ be a maximum spanning tree of $G$.
Pick an arbitrary vertex, $r$, to be the root of $T$, 
and denote by $L_i$ the $i$th layer of $T$, 
where $L_i$, for $i \geq 0$, is the set of vertices with a minimum distance of $i$ from $r$.
Denote by $l(v)$ the layer of vertex $v$ and let 
$$ E'_{even} = \{ (u, v) : l(u) \equiv 0 \mod 2 \} $$
and    
$$ E'_{odd} = \{ (u, v) : l(u) \equiv 1 \mod 2 \} $$
then, it is easy to verify that the following properties hold:

\begin{observation}
The sets $E'_{even}$ and $E'_{odd}$ form a partition of $E'$. 
\end{observation}

\begin{observation}
\label{ob:tree_geq_half}
$ \max(w(E'_{even}), w(E'_{odd}))  \geq \frac{w(E')}{2} $
\end{observation}

We can now describe our algorithm in Algorithm~\ref{alg:apx}.

\begin{algorithm}
\label{alg:apx}
\caption{\UCUDCARPOOL{}}
$(V, E'_{even}, E'_{odd}) \leftarrow$ maximum spanning tree of $G$		\\
Return $\argmax_{E'' \in \{ E'_{even}, E'_{odd} \}}{w(E'')} $	\\
\end{algorithm}

We now prove that the approximation ratio of Algorithm~\ref{alg:apx} is 2.
We start with a simple lemma.

\begin{lemma}
\label{lm:tree_upper_matching}
The weight of a maximum spanning tree of $G$ is an upper bound on the weight of
an optimal matching in $G$.
\end{lemma}

\begin{proof}
Consider the underlying graph of an optimal matching, and complete it to a spanning tree, obviously, the
weight of the resulted tree is no more than the weight of a maximum spanning
tree.
\end{proof}

\begin{theorem}
The \UCUDCARPOOL{} algorithm achi\-eves approximation ratio of 2.
\end{theorem}

\begin{proof}
The proof follows directly from 
Lemma~\ref{lm:tree_upper_matching} and Observation~\ref{ob:tree_geq_half}.
\end{proof}

To see that the analysis is tight, 
consider a uniform weighted clique with $n$ vertices, 
and a spanning path, 
then the approximation algorithm selects $\frac{n - 1}{2}$ edges, 
while there are $n - 1$ in an optimal solution.  